"use strict";(self.webpackChunkffront_end=self.webpackChunkffront_end||[]).push([[100],{5861:(e,a,t)=>{t.d(a,{A:()=>o});var s=t(5043),r=t(4420),n=t(3216);const o=()=>{const[e,a]=(0,s.useState)(JSON.parse(localStorage.getItem("user"))),t=localStorage.getItem("token"),o=((0,n.Zp)(),()=>{localStorage.clear(),window.location.href="/"});return(0,s.useEffect)((()=>{if(t){1e3*(0,r.s)(t).exp<(new Date).getTime()&&o()}a(JSON.parse(localStorage.getItem("user")))}),[a]),{user:e,setUser:a,logOut:o}}},1089:(e,a,t)=>{t.d(a,{cn:()=>n});var s=t(8387),r=t(9359);function n(){for(var e=arguments.length,a=new Array(e),t=0;t<e;t++)a[t]=arguments[t];return(0,r.QP)((0,s.A)(a))}},8100:(e,a,t)=>{t.r(a),t.d(a,{default:()=>U});var s=t(5043),r=t(3003),n=t(8304);const o=()=>{const e=(0,r.wA)();(0,s.useEffect)((()=>{const a=e((0,n.AK)());return()=>{e((0,n.J6)()),a.abort()}}),[e]);const{memories:a,loading:t,error:o}=(0,r.d4)((e=>e.memories));return{memories:a,loading:t,error:o}};var l=t(579);const d=e=>{let{status:a,error:t,children:s}=e;return"pending"===a?(0,l.jsx)("div",{children:"Loading...."}):"failed"===a?(0,l.jsxs)("div",{children:[" ",t]}):(0,l.jsx)("div",{children:s})};var i=t(5861),c=t(1089);const m=s.forwardRef((function(e,a){let{className:t,...s}=e;return(0,l.jsx)("div",{ref:a,className:(0,c.cn)("rounded-lg border bg-card text-card-foreground shadow-sm",t),...s})}));m.displayName="Card";const u=s.forwardRef((function(e,a){let{className:t,...s}=e;return(0,l.jsx)("div",{ref:a,className:(0,c.cn)("flex flex-col space-y-1.5 p-6",t),...s})}));u.displayName="CardHeader";const f=s.forwardRef((function(e,a){let{className:t,...s}=e;return(0,l.jsx)("h3",{ref:a,className:(0,c.cn)("text-2xl font-semibold leading-none tracking-tight",t),...s})}));f.displayName="CardTitle";const g=s.forwardRef((function(e,a){let{className:t,...s}=e;return(0,l.jsx)("p",{ref:a,className:(0,c.cn)("text-sm text-muted-foreground",t),...s})}));g.displayName="CardDescription";const x=s.forwardRef((function(e,a){let{className:t,...s}=e;return(0,l.jsx)("div",{ref:a,className:(0,c.cn)("p-6 pt-0",t),...s})}));x.displayName="CardContent";const p=s.forwardRef((function(e,a){let{className:t,...s}=e;return(0,l.jsx)("div",{ref:a,className:(0,c.cn)("flex items-center p-6 pt-0",t),...s})}));p.displayName="CardFooter";var h=t(6851);const b=(0,t(435).F)("inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),v=s.forwardRef(((e,a)=>{const{className:t,variant:s,size:r,asChild:n=!1,...o}=e,d=n?h.DX:"button";return(0,l.jsx)(d,{className:(0,c.cn)(b({variant:s,size:r,className:t})),ref:a,...o})}));v.displayName="Button";var N=t(6720);const j=e=>{let{memory:a,setCurrentId:t}=e;const{user:s,setUser:o}=(0,i.A)(),d=(0,r.wA)();return(0,l.jsxs)(m,{className:"w-full md:w-5/12 lg:w-1/4 flex flex-col justify-between shadow-xl rounded-lg",children:[(0,l.jsx)(u,{className:"w-full p-0 mb-8",children:(0,l.jsx)("img",{className:"h-44 rounded-lg",src:a.image,alt:""})}),(0,l.jsxs)(x,{children:[(0,l.jsx)(f,{children:a.title}),(0,l.jsx)(g,{children:"User Name"}),(0,l.jsx)("p",{children:a.message})]}),(0,l.jsxs)(p,{className:"flex justify-between ",children:[(0,l.jsxs)(v,{onClick:()=>{t(a._id)},className:"w-1/3 flex justify-between items-center",disabled:!s||s._id!==a.creator,children:["Edit ",(0,l.jsx)(N.b6i,{})]}),(0,l.jsxs)(v,{className:"w-1/3 flex justify-between items-center",variant:"destructive",onClick:()=>d((0,n.BX)(a._id)),disabled:!s||s._id!==(null===a||void 0===a?void 0:a.creator),children:["Delete ",(0,l.jsx)(N.b6i,{})]})]})]})},y=s.forwardRef(((e,a)=>{const{type:t,name:s,placeholder:r,className:n,handleChange:o,value:d}=e;return(0,l.jsx)("input",{type:t,className:(0,c.cn)("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",n),ref:a,name:s,placeholder:r,onChange:e=>o(e),value:d})}));y.displayName="Input";const w=s.forwardRef(((e,a)=>{const{className:t,...s}=e;return(0,l.jsx)("textarea",{className:(0,c.cn)("flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",t),ref:a,...s})}));w.displayName="Textarea";const C=e=>{let{currentId:a,setCurrentId:t,memories:o}=e;const d=(0,r.wA)(),[i,c]=(0,s.useState)({title:"",message:"",tags:[],creator:"",image:""}),m=a?o.find((e=>e._id===a)):null;(0,s.useEffect)((()=>{m&&c(m)}),[a,m]);const u=e=>{c({...i,[e.target.name]:e.target.value})},f=e=>{e.preventDefault(),t(0),c({title:"",message:"",tags:[],image:""})};return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)("h2",{className:"text-center my-4 font-bold text-lg",children:"Create a Memory"}),(0,l.jsxs)("form",{className:"flex flex-col gap-4 w-72",method:"POST",onSubmit:e=>(e=>{const t=new FormData;Object.keys(i).map((e=>t.append(e,i[e]))),e.preventDefault(),0===a?(d((0,n.wP)(t)),f(e)):(console.log(i),d((0,n.rf)(i)),f(e))})(e),enctype:"multipart/form-data",action:"/register",children:[(0,l.jsx)(y,{handleChange:u,placeholder:"Title",name:"title",value:null===i||void 0===i?void 0:i.title}),(0,l.jsx)(w,{onChange:e=>u(e),placeholder:"Message",name:"message",className:"max-h-32",value:null===i||void 0===i?void 0:i.message}),(0,l.jsx)(y,{handleChange:u,placeholder:"Tags",name:"tags",value:null===i||void 0===i?void 0:i.tags}),0===a&&(0,l.jsx)(y,{handleChange:e=>{c({...i,[e.target.name]:e.target.files[0]})},type:"file",name:"image"}),(0,l.jsx)(y,{className:"bg-indigo-800 text-gray-50",type:"submit",value:0===a?"Add Memory":"Update Memory"}),(0,l.jsx)(v,{onClick:e=>f(e),className:"bg-red-800",variant:"destructive",children:"Clear"})]})]})};var k=t(5179),A=t(614);const R=k.bL,I=k.l9,S=k.ZL,z=(k.bm,s.forwardRef(((e,a)=>{let{className:t,...s}=e;return(0,l.jsx)(k.hJ,{ref:a,className:(0,c.cn)("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",t),...s})})));z.displayName=k.hJ.displayName;const _=s.forwardRef(((e,a)=>{let{className:t,children:s,...r}=e;return(0,l.jsxs)(S,{children:[(0,l.jsx)(z,{}),(0,l.jsxs)(k.UC,{ref:a,className:(0,c.cn)("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",t),...r,children:[s,(0,l.jsxs)(k.bm,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",children:[(0,l.jsx)(A.A,{className:"h-4 w-4"}),(0,l.jsx)("span",{className:"sr-only",children:"Close"})]})]})]})}));_.displayName=k.UC.displayName;s.forwardRef(((e,a)=>{let{className:t,...s}=e;return(0,l.jsx)(k.hE,{ref:a,className:(0,c.cn)("text-lg font-semibold leading-none tracking-tight",t),...s})})).displayName=k.hE.displayName;s.forwardRef(((e,a)=>{let{className:t,...s}=e;return(0,l.jsx)(k.VY,{ref:a,className:(0,c.cn)("text-sm text-muted-foreground",t),...s})})).displayName=k.VY.displayName;var D=t(3441),T=t(3156);const U=()=>{const{memories:e,loading:a,error:t}=o(),[r,n]=(0,s.useState)(0),{user:c,setUser:m}=(0,i.A)();return(0,l.jsxs)(d,{status:a,error:t,children:[(0,l.jsxs)("div",{className:"flex py-8",children:[(0,l.jsx)("div",{className:"memory-container flex flex-wrap justify-around lg:justify-evenly gap-y-8 lg:gap-8 h-96 sm:w-full xl:w-3/4 ",children:null===e||void 0===e?void 0:e.map((e=>(0,l.jsx)(j,{memory:e,setCurrentId:n},e._id)))}),c&&(0,l.jsx)("div",{style:{height:"500px"},className:"xl:block items-center gap-8 hidden p-4 rounded-md border-solid border-2 border-bg-slate-50",children:(0,l.jsx)(C,{currentId:r,setCurrentId:n,memories:e})}),!c&&(0,l.jsx)("h2",{className:"xl:block  hidden ",children:" Please Login To Add Memories"})]}),c&&(0,l.jsx)("div",{className:"fixed xl:hidden bottom-10  right-10",children:(0,l.jsxs)(R,{children:[(0,l.jsx)(I,{children:(0,l.jsx)(D.Vx.Provider,{value:{className:"global-class-name",size:"3em"},children:(0,l.jsx)(T.ApK,{})})}),(0,l.jsx)(_,{className:"w-11/12",children:(0,l.jsx)(C,{currentId:r,setCurrentId:n,memories:e})})]})})]})}}}]);
//# sourceMappingURL=100.feb8b905.chunk.js.map